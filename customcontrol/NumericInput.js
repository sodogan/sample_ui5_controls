/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/m/Input","i2d/qm/inspresults/records1/util/NumberFormat","i2d/qm/inspresults/records1/model/formatter"],function(I,N,f){"use strict";return I.extend("i2d.qm.inspresults.records1.customcontrol.NumericInput",{metadata:{properties:{"actualValue":{type:"any"},"decimalPlaces":{type:"int"}},events:{"numericChange":{}}},renderer:{},init:function(){this._bInitialLoading=true;I.prototype.init.apply(this,arguments);},onBeforeRendering:function(){I.prototype.onBeforeRendering.apply(this,arguments);},onAfterRendering:function(){if(this.getActualValue()!==""){var a=f.quantityFormatter(this.getActualValue(),this.getDecimalPlaces());this.setValue(a);}if(this._bInitialLoading){this._oResourceBundle=this.getModel("i18n").getResourceBundle();this.attachChange(this._recalculate);this._bInitialLoading=false;}var d=$("#"+this.getId()+"-labelledby");if(d&&d.length){var l=this.getParent().getContent()[0]&&this.getParent().getContent()[0].getText();d.text(l);}I.prototype.onAfterRendering.apply(this,arguments);},_recalculate:function(e){var t=this.getValue();var i=parseInt(t,10);if(i>999999999999999){return;}else{var v=N.getFloatInstance().parse(t);if(isNaN(v)){this.setValue("");this.setActualValue("");var E=this._oResourceBundle.getText("QM_ENTER_MEAN_VALUE");this.setValueStateText(E);this.setValueState("Error");}else{var F=f.quantityFormatter(v,this.getDecimalPlaces());this.setValue(F);this.setActualValue(N.getFloatInstance().parse(F));this.setValueStateText("");this.setValueState("None");}this.fireNumericChange({value:this.getActualValue()});}}});});
