/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["i2d/qm/inspresults/records1/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","i2d/qm/inspresults/records1/model/formatter"],function(B,J,H,f){"use strict";return B.extend("i2d.qm.inspresults.records1.controller.Object",{formatter:f,onInit:function(){},onShareInJamPress:function(){var v=this.getModel("objectView"),s=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:v.getProperty("/shareOnJamTitle")}}});s.open();},onNavBack:function(){var h=H.getInstance();var p=h.getPreviousHash();if(p!==undefined){history.go(-1);}else{this.getRouter().navTo("worklist",{},true);}},_onObjectMatched:function(e){var o="/ZCoco_Sflight('"+e.getParameter("arguments").objectId+"')";this._bindView(o);},_bindView:function(o){var v=this.getModel("objectView"),d=this.getModel();this.getView().bindElement({path:o,events:{change:this._onBindingChange.bind(this),dataRequested:function(){d.metadataLoaded().then(function(){v.setProperty("/busy",true);});},dataReceived:function(){v.setProperty("/busy",false);}}});},_onBindingChange:function(e){var v=this.getView(),V=this.getModel("objectView"),E=v.getElementBinding();if(!E.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return;}var r=this.getResourceBundle(),o=v.getBindingContext().getObject(),O=o.CARRID,s=o.CARRID;V.setProperty("/busy",false);V.setProperty("/saveAsTileTitle",r.getText("saveAsTileTitle",[s]));V.setProperty("/shareOnJamTitle",s);V.setProperty("/shareSendEmailSubject",r.getText("shareSendEmailObjectSubject",[O]));V.setProperty("/shareSendEmailMessage",r.getText("shareSendEmailObjectMessage",[s,O,""]));}});});
