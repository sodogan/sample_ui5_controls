/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["i2d/qm/inspresults/records1/controller/fragments/RecrodResultsRowItemBaseController","i2d/qm/inspresults/records1/model/formatter"],function(R,f){"use strict";return R.extend("i2d.qm.inspresults.records1.controller.fragments.RecrodResultsRowItem7",{formatter:f,onSingleTokenChange:function(e){var s=e.getSource();var E=e.getParameter("type");var b=s.getBindingContext().getObject()||{};var r=this.oRRController.getResourceBundle();var v=[{ValuationKey:"A",ValuationName:r.getText("QM_ACCEPTED")},{ValuationKey:"R",ValuationName:r.getText("QM_REJECTED")}];var i=e.getParameter("item");var n=0;var a=e.getParameter("values");var g=function(c){v.some(function(d){if(c===d.ValuationName){if(d.ValuationKey==="R"){n++;}return true;}});};a.forEach(g);b.InspRsltNonconformingValsNmbr=n;b.InspResultValidValuesNumber=s.getValidCount();b.to_ResultDetails.results.splice(0,b.to_ResultDetails.results.length);Array.prototype.push.apply(b.to_ResultDetails.results,b.to_ResultDetails.results4Binding);this.precheckAndDataHandleForValuation(b,this.oRRController.Constants.ActionElement.SingleValuation);this.oRRController.handleSaveMap(b,s.getRemovedItems());this.oRRController.refreshBindingFields(s.getModel());}});});
